!function(o,i){var c={t:"Space Game",width:640,height:360,minMailableRooms:2,maxMailableRoomRate:.25,minMissingPeople:5,maxMissingPeople:10},u={i:{s:"robot_3Dblue.png"},n:{e:"repeat",o:"repeat",r:"repeat"},c:{},u:{}},s={left:1,top:2,right:4,bottom:8};function h(t,i){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(h[e]=n[e])}return h}function t(){return h.apply(this,[{}].concat(Array.prototype.slice.call(arguments)))}function e(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var n,r=(n={},{a:function(t){return n[t]||(n[t]=i.getElementById(t)),n[t]},create:function(t){return i.createElement(t)}});function a(h,s){var n={},t={f:function(t){var i=t.keyCode;e(n,i)||(n[i]=!1),n[i]||h(i),n[i]=!0,t.preventDefault()},l:function(t){var i=t.keyCode;e(n,i)||(n[i]=!1),n[i]&&s(i),n[i]=!1,t.preventDefault()},d:function(){o.removeEventListener("keydown",t.f,!1),o.removeEventListener("keyup",t.l,!1)}};return o.addEventListener("keydown",t.f,!1),o.addEventListener("keyup",t.l,!1),t}a.keys={p:65,w:87,v:83,m:68,b:90,g:81,left:37,M:38,right:39,k:40,A:32,S:13};var f=null;f={j:function(t,i){return t+Math.random()*(i-t)},D:function(t,i){return Math.floor(f.j(t,i))},I:function(t){return t[f.D(0,t.length)]},O:function(t){var i=f.D(0,t.length),h=t[i];return t.splice(i,1),h},C:function(t){for(var i=[],h=0;0<t;)1&t&&i.push(1<<h),t>>=1,h+=1;return 0<i.length?f.I(i):0}};var l={R:function(t,i,h){return t<i?i:h<t?h:t},X:function(t,i){return t.left<i.right&&t.right>i.left&&t.top<i.bottom&&t.bottom>i.top},Y:function(t){return Math.atan2(t.y,t.x)},F:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},P:function(t,i){var h=Math.cos(i),s=Math.sin(i);return{x:t.x*h-t.y*s,y:t.x*s+t.y*h}},T:function(t,i,h){if(0===h)return{left:t.left,top:t.top,right:t.right,bottom:t.bottom};var s,n,e=t.right-t.left,o=t.bottom-t.top,r=h/360*Math.PI*2;return 90!==h&&270!==h||(n=e,e=o,o=n),(s=90===h?{x:t.left,y:t.bottom}:180===h?{x:t.right,y:t.bottom}:{x:t.right,y:t.top}).x-=i.x,s.y-=i.y,s=l.P(s,r),{left:i.x+s.x,top:i.y+s.y,right:i.x+s.x+e,bottom:i.y+s.y+o}}};function w(t,i,h,s){this.x=t||0,this.y=i||0,this.z=h||0,this.V=s||0}function d(t){this.G=h({W:null,_:null,from:0,q:1,B:1,H:d.Q.L,U:null,Z:null},t||{}),this.J=-1,this.K=-1,this.N=!1}function p(){this.$=0,this.tt=[]}function v(t){var i=h({x:0,y:0,it:1,ht:1,angle:0,st:!0,alpha:1,nt:0,et:0},t||{});this.ot=null,this.x=i.x,this.y=i.y,this.it=i.it,this.ht=i.ht,this.angle=i.angle,this.st=i.st,this.alpha=i.alpha,this.nt=i.nt,this.et=i.et}function y(t){v.apply(this,arguments),this.rt=[]}function m(t){v.apply(this,arguments);var i=h({w:0,h:0,ct:"black",ut:0,at:0,ft:0,lt:1,wt:1},t||{});this.ut=i.ut,this.w=i.w,this.h=i.h,this.at=i.at,this.ft=i.ft,this.lt=i.lt,this.wt=i.wt,this.ct=i.ct}function b(t){v.apply(this,arguments);var i=h({w:0,h:0,dt:null},t||{});this.w=i.w,this.h=i.h,this.dt=i.dt,this.w&&!i.it&&(this.it=this.w/this.dt.width),this.h&&!i.ht&&(this.ht=this.h/this.dt.height)}function x(t){v.apply(this,arguments);var i=h({pt:"",vt:"left",yt:"top",font:null,ct:"black"},t||{});this.ct=i.ct,this.pt=i.pt,this.vt=i.vt,this.yt=i.yt,this.font=i.font}function g(t){v.apply(this,arguments);var i=h({mt:[],ct:"black"},t||{});this.mt=i.mt,this.ct=i.ct}function M(t){y.apply(this,arguments);var i=h({w:100,h:100},t||{});this.bt=r.create("canvas"),this.bt.width=i.w,this.bt.height=i.h,this.xt=this.bt.getContext("2d")}function k(t,i,h,s,n){var e,o=[],r=s/(h-1);for(e=0;e<h;e+=1)o.push({x:e*r,y:t+i-n/2}),i*=-1;for(i*=-1,e=h-1;0<=e;e-=1)o.push({x:e*r,y:t+i+n/2}),i*=-1;return o}w.gt=function(t){return new w((t.left+t.right)/2,(t.top+t.bottom)/2,(t.right-t.left)/2,(t.bottom-t.top)/2)},(w.prototype={}).Mt=function(t,i){this.x=t||0,this.y=i||0},w.prototype.kt=function(){return this.x-this.z},w.prototype.At=function(){return this.y-this.V},w.prototype.St=function(){return this.x+this.z},w.prototype.jt=function(){return this.y+this.V},w.prototype.Dt=function(){return 2*this.z},w.prototype.It=function(){return 2*this.V},w.prototype.Ot=function(t){return Math.abs(this.x-t.x)<this.z+t.z&&Math.abs(this.y-t.y)<this.V+t.V},w.prototype.Ct=function(t,i){return Math.abs(this.x-t)<this.z&&Math.abs(this.y-i)<this.V},w.prototype.Rt=function(){return new w(this.x,this.y,this.z,this.V)},w.prototype.Xt=function(t){return this.z+=t,this.V+=t,this},w.prototype.Yt=function(t,i){var h,s=i/360*Math.PI*2;90!==i&&270!==i||(h=this.z,this.z=this.V,this.V=h);var n=l.P({x:this.x-t.x,y:this.y-t.y},s);return this.x=t.x+n.x,this.y=t.y+n.y,this},w.prototype.Ft=function(){return{left:this.x-this.z,top:this.y-this.V,right:this.x+this.z,bottom:this.y+this.V}},w.prototype.Pt=function(){return{x:this.x-this.z,y:this.y-this.V,w:2*this.z,h:2*this.V}},d.Q={L:function(t){return t},Tt:function(t){return t*t*t},zt:function(t){return--t*t*t+1},Et:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}},d.prototype={Vt:function(t){this.J=t,this.K=t+this.G.B},Gt:function(t){if(this.G.W&&this.G._||this.G.U){var i=(t-this.J)/this.G.B;1<i&&(i=1);var h=this.G.H(i),s=this.G.from+(this.G.q-this.G.from)*h;this.G.W&&this.G._&&(this.G.W[this.G._]=s),this.G.U&&this.G.U(s)}},Wt:function(){this.N=!0}},p._t=null,p.prototype={qt:function(t){t.Vt(this.$),this.tt.push(t)},Gt:function(t){var i,h,s;for(i=0;i<this.tt.length;i+=1)s=!1,(h=this.tt[i]).N||h.Gt(this.$),h.N?s=!0:this.$>=h.K&&(h.G.Z&&h.G.Z(),s=!0),s&&(this.tt.splice(i,1),i-=1);this.$+=t}},y.prototype=t(v.prototype={Bt:function(t){this.it=t,this.ht=t},Ht:function(t){this.st&&.01<=this.alpha&&(t.save(),(this.x||this.y)&&t.translate(this.x,this.y),1===this.it&&1===this.ht||t.scale(this.it,this.ht),this.angle&&t.rotate(this.angle),(this.nt||this.et)&&t.translate(-this.nt,-this.et),this.alpha<1&&(t.globalAlpha*=this.alpha),this.Lt(t),t.restore())},Lt:function(t){}},{Qt:function(t){return this.rt.push(t),t.ot=this},Ut:function(t){var i=this.rt.indexOf(t);return 0<=i&&(this.rt.splice(i,1),t.ot=null),this},Lt:function(t){for(var i=0;i<this.rt.length;i+=1)this.rt[i].Ht(t)}}),m.prototype=t(v.prototype,{Lt:function(t){if(t.fillStyle=this.ct,this.ut){var i=this.ut,h=this.w,s=this.h;t.beginPath(),t.moveTo(i,0),t.lineTo(h-i,0),t.arcTo(h,0,h,i,i),t.lineTo(h,s-i),t.arcTo(h,s,h-i,s,i),t.lineTo(i,s),t.arcTo(0,s,0,s-i,i),t.lineTo(0,i),t.arcTo(0,0,i,0,i),t.closePath(),(this.at||this.ft)&&t.translate(this.at,this.ft),1===this.lt&&1===this.wt||t.scale(this.lt,this.wt),t.fill()}else t.beginPath(),t.rect(0,0,this.w,this.h),t.closePath(),(this.at||this.ft)&&t.translate(this.at,this.ft),1===this.lt&&1===this.wt||t.scale(this.lt,this.wt),t.fill()}}),b.prototype=t(v.prototype,{Lt:function(t){t.drawImage(this.dt,0,0)}}),x.prototype=t(v.prototype,{Lt:function(t){this.font&&(t.font=this.font),t.textAlign=this.vt,t.textBaseline=this.yt,t.fillStyle=this.ct,t.fillText(this.pt,0,0)}}),g.prototype=t(v.prototype,{Lt:function(t){var i,h;for(t.beginPath(),i=0;i<this.mt.length;i+=1)h=this.mt[i],0===i?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y);t.closePath(),t.fillStyle=this.ct,t.fill()}}),M.prototype=t(y.prototype,{Zt:function(t,i){this.bt.width=t,this.bt.height=i},Qt:function(t){y.prototype.Qt.apply(this,arguments),this.Jt()},Ut:function(t){y.prototype.Ut.apply(this,arguments),this.Jt()},Jt:function(){this.xt.clearRect(0,0,this.bt.width,this.bt.height);for(var t=0;t<this.rt.length;t+=1)this.rt[t].Ht(this.xt)},Lt:function(t){t.drawImage(this.bt,0,0)}});var A,S,j,D=((A=new M({w:70,h:70})).Qt(new m({w:70,h:70,ct:"#c99869"})),A.Qt(new g({mt:k(25,5,7,70,16),ct:"#c58f5c"})),A.Qt(new g({mt:k(55,5,7,70,16),ct:"#c58f5c"})),A),I=((S=new M({w:70,h:70})).Qt(new m({w:70,h:70,ct:"#838796"})),S.Qt(new g({mt:k(25,5,7,70,24),ct:"#7e8291"})),S.Qt(new g({mt:k(55,5,7,70,16),ct:"#7e8291"})),S),O=((j=new M({w:70,h:70})).Qt(new m({w:70,h:70,ct:"#acc0c1"})),j.Qt(new g({mt:k(25,5,7,70,16),ct:"#bbcbcc"})),j.Qt(new g({mt:k(55,5,7,70,16),ct:"#bbcbcc"})),j);function C(t,i){y.call(this,i),this.Kt=t,this.Nt=new w(0,0,10,10),this.$t=new w(0,0,10,10),this.ti=new w(0,0,10,10),this.ii=200,this.hi=4,this.si={x:0,y:0},this.ni={x:0,y:0},this.ei={x:0,y:0};var h=new b({dt:u.c.s,w:19,h:20,nt:74,et:77});this.Qt(h),this.dt=h,this.oi=0}function R(t,i,h,s,n){var e=new y({x:t,y:i});this.ri=e,this.ci=!1,this.ui=s||0,this.ai=n;var o=new m({x:-20,y:-5,w:40,h:25,ct:"#cccccc",ut:5});e.Qt(o),this.fi=o;var r=new y({x:0,y:5});this.li=r,e.Qt(r);var c=new m({x:-20,y:-40,w:40,h:40,ct:"#ffffff",ut:5});r.Qt(c);var u=new x({x:0,y:-20,pt:h,font:"20px Arial",ct:"black",vt:"center",yt:"middle"});r.Qt(u),this.wi=u,this.tt=[]}function X(t,i){y.call(this),this.di=t,this.G=i,this.pi=[]}function Y(){X.apply(this,arguments);var t=new m({w:c.width,h:c.height,ct:"#333333"});this.Qt(t),this.vi=new C(this,{}),this.Qt(this.vi),this.keys=[],this.yi={},this.yi[s.left]=[a.keys.p,a.keys.g,a.keys.left],this.yi[s.top]=[a.keys.w,a.keys.b,a.keys.M],this.yi[s.right]=[a.keys.m,a.keys.right],this.yi[s.bottom]=[a.keys.v,a.keys.k];var h={};Object.entries(this.yi).forEach(function(i){i[1].forEach(function(t){h[t]=i[0]})}),this.mi=h,this.bi=a(this.xi.bind(this),this.gi.bind(this)),this.Mi(this.ki.bind(this))}function F(){X.apply(this,arguments),this.$=0,this.Ai=2,this.Si=new m({w:c.width,h:c.height,ct:u.u.e,lt:5,wt:5}),this.Qt(this.Si),this.s=new b({dt:u.c.s,x:170,y:c.height/2,w:148,h:154,nt:74,et:77}),this.Qt(this.s);var t=new x({pt:"Space Game",font:"32px Arial",x:420,y:100,vt:"center",yt:"middle",ct:"white"});this.Qt(t);var i=new y({x:420,y:190});this.Qt(i);var h=new x({pt:"Controls:",font:"24px Arial",x:0,y:-40,vt:"center",yt:"bottom",ct:"white"});i.Qt(h);var s=this.ji=[new R(0,0,"W",0,this.di.ai),new R(-45,45,"A",.125,this.di.ai),new R(0,45,"S",.25,this.di.ai),new R(45,45,"D",.375,this.di.ai)];this.ji.forEach(function(t){i.Qt(t.ri),t.Vt()});var n=new x({pt:"Press any of these keys to start",font:"18px Arial",x:0,y:70,vt:"center",yt:"top",ct:"white"});i.Qt(n);var e=[["W","A","S","D"],["↑","←","↓","→"],["Z","Q","S","D"]],o=0;this.Di=setInterval(function(){e.length<=(o+=1)&&(o=0),s.forEach(function(t,i){t.wi.pt=e[o][i]})},1e3);var r=[a.keys.p,a.keys.w,a.keys.v,a.keys.m,a.keys.g,a.keys.b,a.keys.left,a.keys.M,a.keys.right,a.keys.k];this.bi=a(function(){},function(i){r.some(function(t){return t===i})&&this.di.Ii(new Y(this.di))}.bind(this)),this.Mi(this.ki.bind(this))}function P(){X.apply(this,arguments),this.i=[],this.Oi=!1,this.Ci=new x({x:c.width/2,y:c.height/2,pt:"0%",ct:"black",vt:"center",yt:"middle",font:"32px Arial"}),this.Qt(new m({w:c.width,h:c.height,ct:"#777777"})),this.Qt(this.Ci)}function T(){this.Gt=this.Gt.bind(this),this.Ri=r.a("root");var t=r.create("canvas");t.width=c.width,t.height=c.height,this.Ri.appendChild(t),this.Xi=u,this.bt=t,this.xt=t.getContext("2d"),this.xt.font="16px Arial",this.ai=new p,p._t=this.ai,this.Kt=new P(this),this.$=0,this.Yi=this.Yi.bind(this),o.addEventListener("resize",this.Fi.bind(this),!1),this.Fi(),this.Gt(0),this.Kt.create()}u.c.e=D.bt,u.c.r=I.bt,u.c.o=O.bt,C.prototype=t(y.prototype,{Pi:function(t){this.oi|=t,this.Ti()},zi:function(t){this.oi^=t,this.Ti()},Ei:function(){this.oi=0,this.Ti()},Ti:function(){this.si.x=0,this.si.y=0,this.oi&s.left&&(this.si.x-=this.ii),this.oi&s.right&&(this.si.x+=this.ii),this.oi&s.top&&(this.si.y-=this.ii),this.oi&s.bottom&&(this.si.y+=this.ii)},Vi:function(){this.$t.Mt(this.Nt.x,this.Nt.y),this.Nt.Mt(this.x,this.y)},Gt:function(t){this.Ti(),(this.si.x||this.si.y)&&(this.dt.angle=l.Y(this.si)),this.x+=this.si.x*t,this.y+=this.si.y*t}}),R.prototype={Vt:function(){this.ci=!0,setTimeout(this.Gi.bind(this),1e3*this.ui)},Gi:function(){if(!this.ci)return!1;var t,i;t=new d({W:this.li,_:"y",from:5,q:15,B:.5,H:d.Q.Tt,Z:function(){this.ai.qt(i)}.bind(this)}),i=new d({W:this.li,_:"y",from:15,q:5,B:.5,H:d.Q.Tt,Z:this.Gi.bind(this)}),this.ai.qt(t)},Wi:function(){this.ci=!1,this.tt.forEach(function(t){t.Wt()})}},X.prototype=t(y.prototype,{create:function(){},d:function(){},Mi:function(t){this.pi.push(t)},Gt:function(t){for(var i=0;i<this.pi.length;i+=1)this.pi[i](t)},Ht:function(t){this.Lt(t)}}),Y._i={qi:1,Bi:2,Oi:3,Hi:4},Y.prototype=t(X.prototype,{Li:function(){return this.Qi===Y._i.Oi||this.Qi===Y._i.Hi},xi:function(t){this.mi[t]&&(this.Li()||(this.Qi===Y._i.qi&&(p._t.qt(new d({W:this.Ui,_:"alpha",from:1,q:0,B:.5})),this.Qi=Y._i.Bi),this.vi.Pi(this.mi[t])))},gi:function(t){this.mi[t]&&this.vi.zi(this.mi[t])},d:function(){this.bi.d()},ki:function(t){this.vi.Gt(t)}}),F.prototype=t(X.prototype,{d:function(){this.ji.forEach(function(t){t.Wi()}),clearInterval(this.Di),this.bi.d()},ki:function(t){this.$+=t;var i=this.$%this.Ai/this.Ai;this.s.it=1+.05*Math.cos(i*Math.PI*2),this.s.ht=1+.05*Math.sin(i*Math.PI*2),this.Si.at-=200*t}}),P.prototype=t(X.prototype,{create:function(){Object.entries(u.i).forEach(function(t){var i=new Image;i.onload=this.Zi.bind(this),i.src=t[1],this.i.push(i),u.c[t[0]]=i},this)},Zi:function(t){if(!this.Oi){var i=this.i.reduce(function(t,i){return(i.complete?1:0)+(t||0)},0);this.Ci.pt=Math.floor(i/this.i.length*100)+"%",i>=this.i.length&&this.Ji()}},Ji:function(){this.Oi||(Object.entries(u.n).forEach(function(t){u.u[t[0]]=this.di.xt.createPattern(u.c[t[0]],t[1])},this),this.Oi=!0,this.di.Ii(new F(this.di)))}}),T.prototype={Fi:function(){this.Yi(),setTimeout(function(){this.Yi()}.bind(this),100)},Yi:function(){var t,i,h=o.getComputedStyle(r.a("root")),s=parseInt(h.width,10),n=parseInt(h.height,10),e=this.bt.width/this.bt.height;s/n<e?i=(t=s)/e:t=(i=n)*e,this.bt.style.width=Math.floor(t)+"px",this.bt.style.height=Math.floor(i)+"px",this.bt.style.position="absolute",this.bt.style.left="50%",this.bt.style.top="50%",this.bt.style.marginLeft=Math.floor(-t/2)+"px",this.bt.style.marginTop=Math.floor(-i/2)+"px"},Ii:function(t){this.Kt&&this.Kt.d(),(this.Kt=t).create()},Gt:function(t){var i=(t-this.$)/1e3;0<i&&(.2<i&&(i=.2),this.Kt.Gt(i),this.Kt.Ht(this.xt),this.ai.Gt(i),this.$=t),requestAnimationFrame(this.Gt)}},o.game=new T}(window,document);